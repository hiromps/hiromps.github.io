<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒãƒƒãƒå±¥æ­´ - VALORANT Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .match-history-container {
            max-width: 1280px; /* max-w-6xl */
            margin: 1rem auto;
            padding: 0 1rem;
        }
        
        .match-card {
            background: rgba(15, 25, 35, 0.95);
            border: 1px solid #ff4655;
            border-radius: 12px;
            margin: 1rem 0;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
        }
        
        .match-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .match-result {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .agent-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .agent-image {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            object-fit: cover;
            border: 2px solid #444;
        }
        
        .win { color: #4CAF50; }
        .loss { color: #f44336; }
        .draw { color: #ff9800; }
        
        .match-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }
        
        .detail-item {
            text-align: center;
        }
        
        .detail-label {
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .detail-value {
            color: #fff;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .map-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .map-image {
            width: 80px;
            height: 45px;
            border-radius: 8px;
            object-fit: cover;
        }
        
        .search-section {
            background: #1f2937; /* bg-gray-800 */
            border-radius: 12px;
            padding: 1.5rem 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
        }
        
        .search-section h2 {
            color: #ef4444; /* text-red-500 */
            font-size: 1.875rem; /* text-3xl */
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-align: center;
            letter-spacing: 0.1em; /* tracking-wider */
        }
        
        .search-section p {
            color: #9ca3af; /* text-gray-400 */
            font-size: 0.875rem; /* text-sm */
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .search-form {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .search-form input {
            flex: 1;
            background: #374151; /* bg-gray-700 */
            color: white;
            border: 2px solid #4b5563; /* border-gray-600 */
            border-radius: 8px;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            transition: all 0.3s ease;
            min-width: 200px;
        }
        
        .search-form input::placeholder {
            color: #9ca3af; /* placeholder-gray-400 */
        }
        
        .search-form input:focus {
            outline: none;
            border-color: #ef4444; /* focus:border-red-500 */
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2); /* focus:ring-red-500 */
        }
        
        .search-form button {
            background: #dc2626; /* bg-red-600 */
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-height: 48px;
        }
        
        .search-form button:hover {
            background: #b91c1c; /* hover:bg-red-700 */
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media screen and (max-width: 640px) {
            .search-section {
                padding: 1rem 1.5rem;
                margin: 1rem;
            }
            
            .search-section h2 {
                font-size: 1.5rem; /* text-2xl */
            }
            
            .search-form {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .search-form input {
                min-width: auto;
                width: 100%;
            }
            
            .search-form button {
                width: 100%;
                padding: 1rem 1.5rem;
            }
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
            color: #888;
        }
        
        .error {
            text-align: center;
            padding: 2rem;
            color: #f44336;
        }
        
        /* èƒŒæ™¯ã‚¹ã‚¿ã‚¤ãƒ« */
        body {
            margin: 0;
            background: linear-gradient(135deg, #0f1419 0%, #1a252f 50%, #2d3748 100%);
            min-height: 100vh;
            color: white;
            font-family: 'Inter', 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f1419 0%, #1a252f 50%, #2d3748 100%);
            z-index: -1;
            overflow: hidden;
        }
        
        .background::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 25% 25%, rgba(255, 70, 85, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(59, 130, 246, 0.08) 0%, transparent 50%);
            animation: movePattern 20s ease-in-out infinite;
        }
        
        .background::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(45deg, transparent 49%, rgba(255, 70, 85, 0.02) 50%, transparent 51%),
                linear-gradient(-45deg, transparent 49%, rgba(59, 130, 246, 0.02) 50%, transparent 51%);
            background-size: 60px 60px;
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes movePattern {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-30px, -30px) rotate(180deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        h2, h3 {
            color: #ff4655;
        }
        
        /* ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒªã‚»ãƒƒãƒˆ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .app-header {
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            padding: 0.75rem 0;
            background-color: rgba(15, 25, 35, 0.98);
            border-bottom: 2px solid #ff4655;
            backdrop-filter: blur(15px);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.4);
            z-index: 999;
            transition: all 0.3s ease;
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
            width: 100%;
            min-height: 60px;
        }
        
        .nav-buttons {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .author-section {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fff;
            flex-shrink: 0;
        }
        
        .author-text {
            margin: 0;
            font-size: 0.85rem;
            font-weight: 600;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            white-space: nowrap;
            color: #fff;
            display: block;
        }
        
        .author-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid #ff4655;
            object-fit: cover;
            flex-shrink: 0;
        }
        .app-header button,
        .app-header a.header-button {
            background-color: #ff4655;
            color: white;
            border: none;
            padding: 0.6rem 1rem;
            margin: 0;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            min-height: 40px;
            box-shadow: 0 2px 8px rgba(255, 70, 85, 0.3);
        }
        .app-header button:hover,
        .app-header a.header-button:hover {
            background-color: #e0303f;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 70, 85, 0.4);
        }
        .app-header button.active,
        .app-header a.header-button.active {
            background-color: #22c55e; /* ç·‘ãªã©ã§ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’ç¤ºã™ */
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.5);
            text-decoration: none; /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚ã‚‚ä¸‹ç·šã‚’æ¶ˆã™ */
        }
        .hidden {
            display: none !important;
        }
        #showOverlayModeLink {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #showTrackerModeLink {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .author-section {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fff;
        }
        .author-text {
            margin: 0;
            font-size: 0.9em;
            font-weight: 600;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }
        .author-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #ff4655;
            object-fit: cover;
        }
        /* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
        .hamburger-menu {
            display: none;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.3s ease;
            min-width: 40px;
            min-height: 40px;
            background-color: transparent;
            border: 1px solid transparent;
        }
        
        .hamburger-menu:hover {
            background-color: rgba(255, 70, 85, 0.1);
            border-color: rgba(255, 70, 85, 0.3);
        }
        
        .hamburger-line {
            width: 22px;
            height: 2px;
            background-color: #fff;
            margin: 2px 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 2px;
        }
        
        .hamburger-menu.active .hamburger-line:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }
        
        .hamburger-menu.active .hamburger-line:nth-child(2) {
            opacity: 0;
        }
        
        .hamburger-menu.active .hamburger-line:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }
        
        .mobile-nav {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(15, 25, 35, 0.98);
            backdrop-filter: blur(15px);
            border-top: 1px solid rgba(255, 70, 85, 0.3);
            padding: 1rem;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            border-bottom: 2px solid rgba(255, 70, 85, 0.5);
            animation: slideDown 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .mobile-nav.active {
            display: block;
        }
        
        .mobile-nav-buttons {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .mobile-nav .header-button {
            width: 100%;
            text-align: center;
            padding: 1rem 1.5rem;
            margin: 0;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            background-color: rgba(255, 70, 85, 0.1);
            border: 1px solid rgba(255, 70, 85, 0.3);
            transition: all 0.3s ease;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .mobile-nav .header-button:hover {
            background-color: rgba(255, 70, 85, 0.2);
            transform: translateY(-1px);
        }
        
        .mobile-nav .header-button.active {
            background-color: rgba(34, 197, 94, 0.2);
            border-color: rgba(34, 197, 94, 0.5);
        }
        
        /* èƒŒæ™¯ã‚¹ã‚¿ã‚¤ãƒ« */
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f1419 0%, #1a252f 50%, #2d3748 100%);
            z-index: -1;
            overflow: hidden;
        }
        
        .background::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 25% 25%, rgba(255, 70, 85, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(59, 130, 246, 0.08) 0%, transparent 50%);
            animation: movePattern 20s ease-in-out infinite;
        }
        
        .background::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(45deg, transparent 49%, rgba(255, 70, 85, 0.02) 50%, transparent 51%),
                linear-gradient(-45deg, transparent 49%, rgba(59, 130, 246, 0.02) 50%, transparent 51%);
            background-size: 60px 60px;
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes movePattern {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-30px, -30px) rotate(180deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ–ãƒ¬ã‚¤ã‚¯ãƒã‚¤ãƒ³ãƒˆ */
        @media screen and (max-width: 1024px) {
            .nav-buttons {
                gap: 0.25rem;
            }
            
            .app-header a.header-button {
                padding: 0.5rem 0.75rem;
                font-size: 0.85rem;
            }
        }
        
        @media screen and (max-width: 768px) {
            .app-header {
                padding: 0.5rem 0;
            }
            
            .header-content {
                padding: 0 1rem;
                min-height: 56px;
            }
            
            .nav-buttons {
                display: none;
            }
            
            .hamburger-menu {
                display: flex;
            }
            
            .author-text {
                font-size: 0.8rem;
            }
            
            .author-avatar {
                width: 32px;
                height: 32px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .header-content {
                padding: 0 0.75rem;
                min-height: 52px;
            }
            
            .author-text {
                font-size: 0.75rem;
                display: block;
            }
            
            .hamburger-menu {
                min-width: 36px;
                min-height: 36px;
                padding: 6px;
            }
            
            .hamburger-line {
                width: 20px;
            }
            
            .mobile-nav {
                padding: 0.75rem;
            }
            
            .mobile-nav .header-button {
                padding: 0.875rem 1rem;
                font-size: 0.95rem;
                min-height: 46px;
            }
        }
    </style>
</head>
    <body>
    <div class="background"></div>
    
    <header class="app-header">
        <div class="header-content">
            <div class="nav-buttons">
                <a href="/" id="showOverlayModeLink" class="header-button">OBSã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤</a>
                <a href="./valorant-stats-tracker/" id="showTrackerModeLink" class="header-button">æˆ¦ç¸¾ãƒˆãƒ©ãƒƒã‚«ãƒ¼</a>
                <a href="/match-history.html" class="header-button active">ãƒãƒƒãƒå±¥æ­´</a>
                <a href="/skins-database.html" class="header-button">ã‚¹ã‚­ãƒ³DB</a>
                <a href="/leaderboard.html" class="header-button">ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
            </div>
            
            <!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ -->
            <div class="hamburger-menu" id="hamburgerMenu">
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
            </div>
            
            <div class="author-section">
                <p class="author-text">Project by ã«ã©å¯</p>
                <img src="assets/images/nidone.png" alt="è£½ä½œè€…ã‚¢ãƒã‚¿ãƒ¼" class="author-avatar">
            </div>
        </div>
        
        <!-- ãƒ¢ãƒã‚¤ãƒ«ç”¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="mobile-nav" id="mobileNav">
            <div class="mobile-nav-buttons">
                <a href="/" class="header-button">OBSã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤</a>
                <a href="./valorant-stats-tracker/" class="header-button">æˆ¦ç¸¾ãƒˆãƒ©ãƒƒã‚«ãƒ¼</a>
                <a href="/match-history.html" class="header-button active">ãƒãƒƒãƒå±¥æ­´</a>
                <a href="/skins-database.html" class="header-button">ã‚¹ã‚­ãƒ³DB</a>
                <a href="/leaderboard.html" class="header-button">ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
            </div>
        </div>
    </header>
    
    <div class="background"></div>
    
    <div class="match-history-container">
        <div class="search-section">
            <h2>VALORANT ãƒãƒƒãƒå±¥æ­´</h2>
            <p>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æœ€æ–°ãƒãƒƒãƒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ãƒ»è¡¨ç¤ºã—ã¾ã™</p>
            <div class="search-form">
                <input type="text" id="playerName" placeholder="ã‚²ãƒ¼ãƒ å (ä¾‹: TenZ)" required>
                <input type="text" id="playerTag" placeholder="ã‚¿ã‚°ãƒ©ã‚¤ãƒ³ (ä¾‹: 1234)" required>
                <button onclick="searchMatchHistory()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    æ¤œç´¢
                </button>
            </div>
        </div>
        
        <div id="matchHistoryResults">
            <!-- ãƒãƒƒãƒå±¥æ­´ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
        </div>
    </div>
    
    <script src="config.js"></script>
    <script src="js/api.js"></script>
    <script>
        // ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å‹•ä½œï¼ˆå®Œå…¨çµ±ä¸€ç‰ˆï¼‰
        function initializeHamburgerMenu() {
            const hamburgerMenu = document.getElementById('hamburgerMenu');
            const mobileNav = document.getElementById('mobileNav');
            
            if (!hamburgerMenu || !mobileNav) {
                console.warn('ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¾ãŸã¯ãƒ¢ãƒã‚¤ãƒ«ãƒŠãƒ“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                return;
            }
            
            // ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
            hamburgerMenu.addEventListener('click', function(event) {
                event.stopPropagation();
                hamburgerMenu.classList.toggle('active');
                mobileNav.classList.toggle('active');
                
                // ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚ã®ariaå±æ€§ã‚’æ›´æ–°
                const isActive = hamburgerMenu.classList.contains('active');
                hamburgerMenu.setAttribute('aria-expanded', isActive);
                mobileNav.setAttribute('aria-hidden', !isActive);
            });
            
            // ãƒ¢ãƒã‚¤ãƒ«ãƒŠãƒ“ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹
            const mobileNavLinks = mobileNav.querySelectorAll('.header-button');
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', () => {
                    closeHamburgerMenu();
                });
            });
            
            // ç”»é¢å¤–ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹
            document.addEventListener('click', function(event) {
                if (!hamburgerMenu.contains(event.target) && 
                    !mobileNav.contains(event.target) && 
                    mobileNav.classList.contains('active')) {
                    closeHamburgerMenu();
                }
            });
            
            // ESCã‚­ãƒ¼ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape' && mobileNav.classList.contains('active')) {
                    closeHamburgerMenu();
                }
            });
            
            // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºæ™‚ã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ“ãƒ¥ãƒ¼ã«æˆ»ã£ãŸå ´åˆï¼‰
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768 && mobileNav.classList.contains('active')) {
                    closeHamburgerMenu();
                }
            });
            
            // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹å…±é€šé–¢æ•°
            function closeHamburgerMenu() {
                hamburgerMenu.classList.remove('active');
                mobileNav.classList.remove('active');
                hamburgerMenu.setAttribute('aria-expanded', false);
                mobileNav.setAttribute('aria-hidden', true);
            }
            
            // åˆæœŸçŠ¶æ…‹ã®ariaå±æ€§ã‚’è¨­å®š
            hamburgerMenu.setAttribute('aria-expanded', false);
            hamburgerMenu.setAttribute('aria-label', 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã');
            mobileNav.setAttribute('aria-hidden', true);
            
            console.log('ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒæ­£å¸¸ã«åˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ');
        }

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã§ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±ã‚’ä¿å­˜
        let currentSearchedPlayer = {
            name: '',
            tag: ''
        };
        
        async function searchMatchHistory() {
            const playerName = document.getElementById('playerName').value;
            const playerTag = document.getElementById('playerTag').value;
            
            if (!playerName || !playerTag) {
                alert('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åã¨ã‚¿ã‚°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            const resultsContainer = document.getElementById('matchHistoryResults');
            resultsContainer.innerHTML = '<div class="loading">ãƒãƒƒãƒå±¥æ­´ã‚’å–å¾—ä¸­...</div>';
            
            try {
                // ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¡¨ç¤º
                console.log(`ãƒãƒƒãƒå±¥æ­´æ¤œç´¢é–‹å§‹: ${playerName}#${playerTag}`);
                console.log('ä½¿ç”¨ã™ã‚‹APIè¨­å®š:', {
                    API_BASE_URL: config.API_BASE_URL,
                    API_KEY: config.API_KEY ? `${config.API_KEY.substring(0, 10)}...` : 'ãªã—'
                });
                
                // å…¥åŠ›å€¤ã®æ¤œè¨¼
                if (!playerName.trim() || !playerTag.trim()) {
                    throw new Error('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åã¨ã‚¿ã‚°ã®ä¸¡æ–¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                }
                
                // æ¤œç´¢ã—ãŸãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±ã‚’ä¿å­˜
                currentSearchedPlayer.name = playerName.trim();
                currentSearchedPlayer.tag = playerTag.trim();
                
                // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¡¨ç¤ºã‚’æ›´æ–°
                resultsContainer.innerHTML = `
                    <div class="loading">
                        <p>ãƒãƒƒãƒå±¥æ­´ã‚’å–å¾—ä¸­...</p>
                        <p style="font-size: 0.9rem; color: #ccc;">ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼: ${currentSearchedPlayer.name}#${currentSearchedPlayer.tag}</p>
                        <p style="font-size: 0.8rem; color: #999;">è¤‡æ•°ã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è©¦è¡Œä¸­...</p>
                    </div>
                `;
                
                // ãƒãƒƒãƒå±¥æ­´API ã‚’å‘¼ã³å‡ºã—ã¾ã™ï¼ˆæˆ¦ç¸¾ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã¨åŒã˜ä»•çµ„ã¿ï¼‰
                const data = await fetchMatchHistory(currentSearchedPlayer.name, currentSearchedPlayer.tag, 'ap', 'competitive', 15);
                
                console.log('APIå¿œç­”ãƒ‡ãƒ¼ã‚¿:', data);
                
                if (!data) {
                    throw new Error('APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åã¾ãŸã¯ã‚¿ã‚°ãŒæ­£ã—ããªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚');
                }
                
                // æˆ¦ç¸¾ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã¨åŒã˜ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ§‹é€ ã‚’ãƒã‚§ãƒƒã‚¯
                if (data.status && data.status !== 200) {
                    console.error('APIå¿œç­”ã‚¨ãƒ©ãƒ¼:', data);
                    throw new Error(`APIã‚¨ãƒ©ãƒ¼: ${data.status} - ${data.error || data.message || 'Unknown error'}`);
                }
                
                // ãƒ‡ãƒ¼ã‚¿ã®å­˜åœ¨ç¢ºèª
                const matches = data.data || [];
                const accountData = data.accountData;
                
                console.log(`å–å¾—ã—ãŸãƒãƒƒãƒæ•°: ${matches.length}`);
                console.log('ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±:', accountData);
                
                if (matches.length === 0) {
                    resultsContainer.innerHTML = `
                        <div class="error">
                            <h3>ãƒãƒƒãƒå±¥æ­´ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h3>
                            <p>${data.message || 'ã“ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒãƒƒãƒå±¥æ­´ãŒãªã„ã‹ã€æœ€è¿‘ã®è©¦åˆãŒãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚'}</p>
                            <details style="margin-top: 1rem; color: #888;">
                                <summary>è©³ç´°æƒ…å ±</summary>
                                <pre style="margin-top: 0.5rem; font-size: 0.8rem; white-space: pre-wrap;">ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼: ${currentSearchedPlayer.name}#${currentSearchedPlayer.tag}
PUUID: ${accountData ? accountData.puuid : 'N/A'}
åœ°åŸŸ: ${accountData ? accountData.region : 'N/A'}
APIãƒ¬ã‚¹ãƒãƒ³ã‚¹: ${JSON.stringify(data, null, 2)}</pre>
                            </details>
                        </div>
                    `;
                    return;
                }
                
                // ãƒãƒƒãƒå±¥æ­´ç”¨ã®ç°¡å˜ãªãƒ‡ãƒ¼ã‚¿å‡¦ç†
                const processedMatches = processMatchDataForHistory(matches, accountData.puuid);
                displayMatchHistory(processedMatches);
                
            } catch (error) {
                console.error('ãƒãƒƒãƒå±¥æ­´å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                
                let errorMessage = 'ãƒãƒƒãƒå±¥æ­´ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚';
                let suggestionMessage = '';
                let showAPIKeyGuide = false;
                
                if (error.message.includes('APIã‚­ãƒ¼ãŒç„¡åŠ¹')) {
                    errorMessage = 'APIã‚­ãƒ¼ãŒç„¡åŠ¹ã¾ãŸã¯æœŸé™åˆ‡ã‚Œã§ã™ã€‚';
                    showAPIKeyGuide = true;
                } else if (error.message.includes('è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“') || error.message.includes('404')) {
                    errorMessage = 'ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚';
                    suggestionMessage = 'ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åã¨ã‚¿ã‚°ï¼ˆä¾‹ï¼šPlayer#1234ï¼‰ãŒæ­£ã—ã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚VALORANTã§æœ€è¿‘ãƒ—ãƒ¬ã‚¤ã—ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚';
                } else if (error.message.includes('APIã‚¨ãƒ©ãƒ¼')) {
                    errorMessage = `APIã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${error.message}`;
                    suggestionMessage = 'Henrik-3 APIã‚µãƒ¼ãƒãƒ¼ã«å•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚';
                } else if (error.message.includes('fetch') || error.message.includes('network') || error.message.includes('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯')) {
                    errorMessage = 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚';
                    suggestionMessage = 'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚VPNã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ç„¡åŠ¹ã«ã—ã¦ã¿ã¦ãã ã•ã„ã€‚';
                } else if (error.message.includes('ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ')) {
                    errorMessage = 'ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚';
                    suggestionMessage = 'ã‚µãƒ¼ãƒãƒ¼ãŒæ··é›‘ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚';
                } else if (error.message.includes('ãƒ¬ãƒ¼ãƒˆåˆ¶é™')) {
                    errorMessage = 'APIãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«é”ã—ã¾ã—ãŸã€‚';
                    suggestionMessage = 'çŸ­æ™‚é–“ã§å¤šãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚5-10åˆ†å¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚';
                } else if (error.message.includes('å…¥åŠ›')) {
                    errorMessage = error.message;
                    suggestionMessage = 'ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åã¨ã‚¿ã‚°ã®ä¸¡æ–¹ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                }
                
                resultsContainer.innerHTML = `
                    <div class="error">
                        <h3>${showAPIKeyGuide ? 'ğŸ”‘ APIã‚­ãƒ¼ã‚¨ãƒ©ãƒ¼' : 'ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ'}</h3>
                        <p><strong>${errorMessage}</strong></p>
                        ${suggestionMessage ? `<p style="color: #ccc; margin-top: 0.5rem;">${suggestionMessage}</p>` : ''}
                        
                        ${showAPIKeyGuide ? `
                            <div class="api-key-guide" style="background: #1a1a1a; border: 1px solid #333; border-radius: 8px; padding: 1rem; margin: 1rem 0; color: #fff;">
                                <h4 style="color: #ff4655; margin-bottom: 0.5rem;">ğŸ’¡ APIã‚­ãƒ¼å–å¾—æ–¹æ³•</h4>
                                <ol style="margin: 0.5rem 0; padding-left: 1.5rem; line-height: 1.6;">
                                    <li><strong>Henrik-3 å…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã«ã‚¢ã‚¯ã‚»ã‚¹:</strong>
                                        <br><a href="https://github.com/Henrik-3/unofficial-valorant-api" target="_blank" rel="noopener" style="color: #4CAF50;">â†’ Henrik-3 API GitHub</a>
                                    </li>
                                    <li><strong>Discordã‚µãƒ¼ãƒãƒ¼ã§æ–°ã—ã„APIã‚­ãƒ¼ã‚’ç”³è«‹:</strong>
                                        <ul style="margin: 0.5rem 0; padding-left: 1rem;">
                                            <li>Basic Key: å³æ™‚å–å¾—å¯èƒ½ï¼ˆ30 requests/minuteï¼‰</li>
                                            <li>Advanced Key: 24-48æ™‚é–“ã§å›ç­”ï¼ˆ90 requests/minuteï¼‰</li>
                                        </ul>
                                    </li>
                                    <li><strong>config.jsãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°:</strong>
                                        <br><code style="background: #333; padding: 0.2rem 0.4rem; border-radius: 4px; color: #4CAF50;">API_KEY: "your-new-api-key-here"</code>
                                    </li>
                                </ol>
                                
                                <div style="background: #2a2a2a; border-left: 4px solid #ff4655; padding: 0.5rem; margin: 1rem 0;">
                                    <strong>ğŸ“‹ ç”³è«‹æ™‚ã«å¿…è¦ãªæƒ…å ±:</strong>
                                    <ul style="margin: 0.5rem 0; font-size: 0.9rem;">
                                        <li>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç”¨é€”èª¬æ˜</li>
                                        <li>ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ/å…¬é–‹ä½¿ç”¨ã®æ˜è¨˜</li>
                                        <li>ãƒ‡ãƒ¼ã‚¿ã®é©åˆ‡ãªä½¿ç”¨ã«åŒæ„</li>
                                    </ul>
                                </div>
                                
                                <div style="color: #888; font-size: 0.9rem; margin-top: 0.5rem;">
                                    <strong>æ³¨æ„:</strong> Henrik-3 APIã§ã¯ç¾åœ¨èªè¨¼ãŒå¿…é ˆã¨ãªã£ã¦ã„ã¾ã™ã€‚
                                </div>
                            </div>
                        ` : ''}
                        
                        <div style="margin-top: 1rem;">
                            <button onclick="searchMatchHistory()" style="padding: 0.5rem 1rem; background: #ff4655; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 0.5rem;">
                                å†è©¦è¡Œ
                            </button>
                            <button onclick="testAPIConnection()" style="padding: 0.5rem 1rem; background: #555; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                APIæ¥ç¶šãƒ†ã‚¹ãƒˆ
                            </button>
                        </div>
                        <details style="margin-top: 1rem; color: #888;">
                            <summary>è©³ç´°æƒ…å ±ï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰</summary>
                            <pre style="margin-top: 0.5rem; font-size: 0.8rem; white-space: pre-wrap;">ã‚¨ãƒ©ãƒ¼: ${error.message}

ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼: ${currentSearchedPlayer.name}#${currentSearchedPlayer.tag}
APIè¨­å®š:
- ãƒ™ãƒ¼ã‚¹URL: ${config.API_BASE_URL}
- APIã‚­ãƒ¼: ${config.API_KEY ? 'è¨­å®šæ¸ˆã¿' : 'æœªè¨­å®š'}

ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±:
- User Agent: ${navigator.userAgent}
- ç¾åœ¨æ™‚åˆ»: ${new Date().toLocaleString()}</pre>
                        </details>
                    </div>
                `;
            }
        }
        
        // ãƒãƒƒãƒå±¥æ­´ç”¨ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†é–¢æ•°ï¼ˆæˆ¦ç¸¾ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã®ç°¡ç•¥ç‰ˆï¼‰
        function processMatchDataForHistory(matches, puuid) {
            console.log("processMatchDataForHistory received matches:", matches.length);
            console.log("processMatchDataForHistory received puuid:", puuid);

            if (!matches || matches.length === 0) {
                return [];
            }

            const processedMatches = matches.map((match, index) => {
                console.log(`Processing match ${index + 1}:`, match);

                if (!match || !match.metadata || !match.players || !match.teams) {
                    console.warn("Skipping match due to missing fundamental data structure:", match);
                    return null;
                }

                // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¦‹ã¤ã‘ã‚‹
                const player = match.players.find(p => p.puuid === puuid);
                if (!player || !player.stats || !player.agent) {
                    console.warn("Player not found in match:", match, "for puuid:", puuid);
                    return null;
                }

                // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒãƒ¼ãƒ æƒ…å ±ã‚’å–å¾—
                const playerTeamData = match.teams.find(t => t.team_id.toLowerCase() === player.team_id.toLowerCase());
                if (!playerTeamData || typeof playerTeamData.won !== 'boolean') {
                    console.warn("Player team data not found:", match, "for team_id:", player.team_id);
                    return null;
                }

                const won = playerTeamData.won;
                const roundsWon = playerTeamData.rounds ? playerTeamData.rounds.won : 0;
                const roundsLost = playerTeamData.rounds ? playerTeamData.rounds.lost : 0;

                // çµ±è¨ˆè¨ˆç®—
                const kills = player.stats.kills || 0;
                const deaths = player.stats.deaths || 0;
                const assists = player.stats.assists || 0;
                const headshots = player.stats.headshots || 0;
                const bodyshots = player.stats.bodyshots || 0;
                const legshots = player.stats.legshots || 0;

                const totalShots = headshots + bodyshots + legshots;
                const headshotRate = totalShots > 0 ? ((headshots / totalShots) * 100).toFixed(1) : "0.0";
                const kd = deaths > 0 ? (kills / deaths).toFixed(2) : kills.toFixed(2);

                // ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæƒ…å ±
                const agentName = player.agent.name || 'Unknown';
                let agentIconUrl = getAgentImageUrl(agentName);

                // ãƒ©ãƒ³ã‚¯æƒ…å ±
                const rankName = player.tier && player.tier.name ? player.tier.name : "Unranked";
                let rankIconUrl = getRankImageUrl(rankName);

                // ç¶™ç¶šæ™‚é–“ï¼ˆãƒŸãƒªç§’ã‹ã‚‰åˆ†ã«å¤‰æ›ï¼‰
                const duration = match.metadata.game_length || 0;
                const durationMinutes = Math.round(duration / 60000) || 0;

                return {
                    matchId: match.metadata.match_id,
                    map: match.metadata.map ? match.metadata.map.name : 'ä¸æ˜ãªãƒãƒƒãƒ—',
                    agentName: agentName,
                    agentIcon: agentIconUrl,
                    result: won ? 'å‹åˆ©' : 'æ•—åŒ—',
                    resultColor: won ? 'win' : 'loss',
                    score: `${roundsWon} - ${roundsLost}`,
                    kills: kills,
                    deaths: deaths,
                    assists: assists,
                    kda: `${kills}/${deaths}/${assists}`,
                    kd: kd,
                    headshotRate: headshotRate,
                    rankName: rankName,
                    rankIcon: rankIconUrl,
                    gameMode: match.metadata.queue ? match.metadata.queue.name : 'Unknown',
                    duration: durationMinutes,
                    date: match.metadata.game_start ? new Date(match.metadata.game_start).toLocaleDateString() : 'Unknown'
                };
            }).filter(Boolean);

            console.log("processMatchDataForHistory returning:", processedMatches.length, "processed matches");
            return processedMatches;
        }

        // APIæ¥ç¶šãƒ†ã‚¹ãƒˆé–¢æ•°ã‚’è¿½åŠ 
        async function testAPIConnection() {
            const resultsContainer = document.getElementById('matchHistoryResults');
            resultsContainer.innerHTML = '<div class="loading">APIæ¥ç¶šã‚’ãƒ†ã‚¹ãƒˆä¸­...</div>';
            
            try {
                // åŸºæœ¬çš„ãªæ¥ç¶šãƒ†ã‚¹ãƒˆ
                const testUrls = [
                    `${config.API_BASE_URL}/v1/status`,
                    `${config.API_BASE_URL}/status`,
                    config.API_BASE_URL
                ];
                
                const results = [];
                
                for (const url of testUrls) {
                    try {
                        console.log(`[ãƒ†ã‚¹ãƒˆ] ${url} ã«ã‚¢ã‚¯ã‚»ã‚¹ä¸­...`);
                        const response = await fetch(url, {
                            method: 'GET',
                            headers: {
                                'Accept': 'application/json'
                            }
                        });
                        
                        const isAuthError = response.status === 401;
                        results.push({
                            url: url,
                            status: response.status,
                            statusText: response.statusText,
                            success: response.ok,
                            isAuthError: isAuthError,
                            message: isAuthError ? 'APIã‚­ãƒ¼èªè¨¼ã‚¨ãƒ©ãƒ¼' : response.statusText
                        });
                        
                        if (response.ok) {
                            break; // æˆåŠŸã—ãŸã‚‰çµ‚äº†
                        }
                    } catch (err) {
                        results.push({
                            url: url,
                            error: err.message,
                            success: false
                        });
                    }
                }
                
                const successfulTests = results.filter(r => r.success);
                const failedTests = results.filter(r => !r.success);
                
                resultsContainer.innerHTML = `
                    <div class="error">
                        <h3>APIæ¥ç¶šãƒ†ã‚¹ãƒˆçµæœ</h3>
                        ${successfulTests.length > 0 ? `
                            <div style="color: #4CAF50; margin: 0.5rem 0;">
                                <strong>âœ… æˆåŠŸã—ãŸæ¥ç¶š:</strong>
                                ${successfulTests.map(r => `<br>â€¢ ${r.url} (${r.status})`).join('')}
                            </div>
                        ` : ''}
                        ${failedTests.length > 0 ? `
                            <div style="color: #f44336; margin: 0.5rem 0;">
                                <strong>âŒ å¤±æ•—ã—ãŸæ¥ç¶š:</strong>
                                ${failedTests.map(r => `<br>â€¢ ${r.url} ${r.error ? `(${r.error})` : `(${r.status}${r.isAuthError ? ' - APIã‚­ãƒ¼èªè¨¼ã‚¨ãƒ©ãƒ¼' : ''})`}`).join('')}
                            </div>
                        ` : ''}
                        ${failedTests.some(r => r.isAuthError) ? `
                            <div style="background: #2a1a1a; border: 1px solid #ff4655; border-radius: 6px; padding: 0.8rem; margin: 1rem 0; color: #fff;">
                                <strong style="color: #ff4655;">ğŸ”‘ èªè¨¼ã‚¨ãƒ©ãƒ¼ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ</strong>
                                <p style="margin: 0.5rem 0; font-size: 0.9rem;">ç¾åœ¨ã®APIã‚­ãƒ¼ãŒç„¡åŠ¹ã§ã™ã€‚æ–°ã—ã„APIã‚­ãƒ¼ã®å–å¾—ãŒå¿…è¦ã§ã™ã€‚</p>
                                <a href="https://github.com/Henrik-3/unofficial-valorant-api" target="_blank" rel="noopener" style="color: #4CAF50; text-decoration: underline;">
                                    Henrik-3 API GitHub ã§è©³ç´°ã‚’ç¢ºèª â†’
                                </a>
                            </div>
                        ` : ''}
                        <p style="margin-top: 1rem; color: #ccc;">
                            ${successfulTests.length > 0 ? 
                                'APIã‚µãƒ¼ãƒãƒ¼ã¸ã®åŸºæœ¬æ¥ç¶šã¯æˆåŠŸã—ã¦ã„ã¾ã™ãŒã€ãƒãƒƒãƒå±¥æ­´ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«å•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚' :
                                'APIã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šãŒã§ãã¾ã›ã‚“ã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šã¾ãŸã¯APIã‚µãƒ¼ãƒãƒ¼ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚'
                            }
                        </p>
                        <button onclick="searchMatchHistory()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #ff4655; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            ãƒãƒƒãƒå±¥æ­´æ¤œç´¢ã«æˆ»ã‚‹
                        </button>
                    </div>
                `;
                
            } catch (error) {
                console.error('APIæ¥ç¶šãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                resultsContainer.innerHTML = `
                    <div class="error">
                        <h3>APIæ¥ç¶šãƒ†ã‚¹ãƒˆå¤±æ•—</h3>
                        <p>æ¥ç¶šãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${error.message}</p>
                        <button onclick="searchMatchHistory()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #ff4655; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            ãƒãƒƒãƒå±¥æ­´æ¤œç´¢ã«æˆ»ã‚‹
                        </button>
                    </div>
                `;
            }
        }
        
        function displayMatchHistory(matches) {
            const resultsContainer = document.getElementById('matchHistoryResults');
            
            if (!matches || matches.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="error">
                        <h3>ãƒãƒƒãƒå±¥æ­´ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h3>
                        <p>ã“ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒãƒƒãƒå±¥æ­´ãŒãªã„ã‹ã€æœ€è¿‘ã®è©¦åˆãŒãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
                    </div>
                `;
                return;
            }
            
            console.log('è¡¨ç¤ºã™ã‚‹ãƒãƒƒãƒãƒ‡ãƒ¼ã‚¿:', matches);
            
            const matchesHTML = matches.map((match, index) => {
                console.log(`ãƒãƒƒãƒ ${index + 1}:`, match);
                
                return `
                    <div class="match-card">
                        <div class="match-header">
                            <div class="match-result ${match.resultColor}">${match.result}</div>
                            <div class="agent-info">
                                <img src="${match.agentIcon}" alt="${match.agentName}" class="agent-image" 
                                     onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjNDQ0Ii8+Cjx0ZXh0IHg9IjI1IiB5PSIyNSIgZmlsbD0iIzg4OCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSI4Ij5BR0VOVDwvdGV4dD4KPC9zdmc+'">
                                <span style="color: #ccc; font-size: 0.9rem;">${match.agentName}</span>
                            </div>
                        </div>
                        
                        <div class="match-details">
                            <div class="detail-item">
                                <div class="detail-label">ãƒãƒƒãƒ—</div>
                                <div class="detail-value">${match.map}</div>
                            </div>
                            
                            <div class="detail-item">
                                <div class="detail-label">ã‚¹ã‚³ã‚¢</div>
                                <div class="detail-value">${match.score}</div>
                            </div>
                            
                            <div class="detail-item">
                                <div class="detail-label">K/D/A</div>
                                <div class="detail-value">${match.kda}</div>
                            </div>
                            
                            <div class="detail-item">
                                <div class="detail-label">K/Dç‡</div>
                                <div class="detail-value">${match.kd}</div>
                            </div>
                            
                            <div class="detail-item">
                                <div class="detail-label">HSç‡</div>
                                <div class="detail-value">${match.headshotRate}%</div>
                            </div>
                            
                            <div class="detail-item">
                                <div class="detail-label">ãƒ¢ãƒ¼ãƒ‰</div>
                                <div class="detail-value">${match.gameMode}</div>
                            </div>
                            
                            ${match.duration > 0 ? `
                                <div class="detail-item">
                                    <div class="detail-label">æ™‚é–“</div>
                                    <div class="detail-value">${match.duration}åˆ†</div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            
            resultsContainer.innerHTML = matchesHTML;
        }
        
        // Enterã‚­ãƒ¼ã§ã®æ¤œç´¢æ©Ÿèƒ½
        function initializeSearchForm() {
            const playerNameInput = document.getElementById('playerName');
            const playerTagInput = document.getElementById('playerTag');
            
            // Enterã‚­ãƒ¼ã§ã®æ¤œç´¢
            [playerNameInput, playerTagInput].forEach(input => {
                input.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        event.preventDefault();
                        searchMatchHistory();
                    }
                });
                
                // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                input.addEventListener('focus', function() {
                    this.style.transform = 'translateY(-1px)';
                });
                
                input.addEventListener('blur', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
            
            // æ¤œç´¢ãƒœã‚¿ãƒ³ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
            const searchButton = document.querySelector('.search-form button');
            searchButton.addEventListener('keypress', function(event) {
                if (event.key === 'Enter' || event.key === ' ') {
                    event.preventDefault();
                    searchMatchHistory();
                }
            });
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¨æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã‚’åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeHamburgerMenu();
            initializeSearchForm();
        });
    </script>
</body>
</html> 